<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Group Expenses - Personal Budget Tracker</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fpersonalb5174back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="min-h-screen bg-background">
    <!-- Navigation Header -->
    <header class="bg-white border-b border-border shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo and Brand -->
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <span class="text-xl font-semibold text-text-primary">Budget Tracker</span>
                    </div>
                </div>

                <!-- Navigation Links -->
                <nav class="hidden md:flex space-x-8">
                    <a href="dashboard.html" class="text-text-secondary hover:text-primary transition-colors px-3 py-2 rounded-md text-sm font-medium">
                        Dashboard
                    </a>
                    <a href="transaction_management.html" class="text-text-secondary hover:text-primary transition-colors px-3 py-2 rounded-md text-sm font-medium">
                        Transactions
                    </a>
                    <a href="budget_management.html" class="text-text-secondary hover:text-primary transition-colors px-3 py-2 rounded-md text-sm font-medium">
                        Budgets
                    </a>
                    <a href="group_expenses.html" class="text-primary bg-primary-50 px-3 py-2 rounded-md text-sm font-medium">
                        Group Expenses
                    </a>
                    <a href="reports_and_analytics.html" class="text-text-secondary hover:text-primary transition-colors px-3 py-2 rounded-md text-sm font-medium">
                        Reports
                    </a>
                </nav>

                <!-- User Menu -->
                <div class="flex items-center space-x-4">
                    <button class="p-2 text-text-secondary hover:text-primary transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5-5-5h5v-12h5v12z"/>
                        </svg>
                    </button>
                    <div class="relative">
                        <button id="userMenuButton" class="flex items-center space-x-2 text-text-secondary hover:text-primary transition-colors">
                            <img class="w-8 h-8 rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="User Avatar" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <span class="text-sm font-medium">John Doe</span>
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                        <div id="userMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-elevation-2 py-1 z-50">
                            <a href="javascript:void(0)" class="block px-4 py-2 text-sm text-text-secondary hover:bg-gray-50">Profile Settings</a>
                            <a href="login.html" class="block px-4 py-2 text-sm text-text-secondary hover:bg-gray-50">Sign Out</a>
                        </div>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="mobileMenuButton" class="p-2 text-text-secondary hover:text-primary transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t border-border">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="dashboard.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors">Dashboard</a>
                <a href="transaction_management.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors">Transactions</a>
                <a href="budget_management.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors">Budgets</a>
                <a href="group_expenses.html" class="block px-3 py-2 text-primary bg-primary-50 rounded-md">Group Expenses</a>
                <a href="reports_and_analytics.html" class="block px-3 py-2 text-text-secondary hover:text-primary transition-colors">Reports</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Page Header -->
        <div class="mb-8">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                <div>
                    <h1 class="text-3xl font-semibold text-text-primary">Group Expenses</h1>
                    <p class="mt-2 text-text-secondary">Manage shared expenses and track group balances</p>
                </div>
                <div class="mt-4 sm:mt-0">
                    <button id="createGroupBtn" class="btn-primary inline-flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                        </svg>
                        Create Group
                    </button>
                </div>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="card p-6">
                <div class="flex items-center">
                    <div class="p-3 bg-primary-50 rounded-lg">
                        <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-text-secondary">Active Groups</p>
                        <p class="text-2xl font-semibold text-text-primary">3</p>
                    </div>
                </div>
            </div>

            <div class="card p-6">
                <div class="flex items-center">
                    <div class="p-3 bg-success-50 rounded-lg">
                        <svg class="w-6 h-6 text-success-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-text-secondary">You Owe</p>
                        <p class="text-2xl font-semibold text-error-600 data-font">$127.50</p>
                    </div>
                </div>
            </div>

            <div class="card p-6">
                <div class="flex items-center">
                    <div class="p-3 bg-accent-50 rounded-lg">
                        <svg class="w-6 h-6 text-accent-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-text-secondary">You're Owed</p>
                        <p class="text-2xl font-semibold text-success-600 data-font">$89.25</p>
                    </div>
                </div>
            </div>

            <div class="card p-6">
                <div class="flex items-center">
                    <div class="p-3 bg-secondary-50 rounded-lg">
                        <svg class="w-6 h-6 text-secondary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-text-secondary">Total Expenses</p>
                        <p class="text-2xl font-semibold text-text-primary data-font">$1,245.75</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Active Groups -->
        <section class="mb-8">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-semibold text-text-primary">Your Groups</h2>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" id="groupSearch" placeholder="Search groups..." class="pl-10 pr-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary text-sm" />
                        <svg class="w-4 h-4 text-text-secondary absolute left-3 top-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                    <select id="groupFilter" class="border border-border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                        <option value="all">All Groups</option>
                        <option value="active">Active</option>
                        <option value="settled">Settled</option>
                    </select>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6" id="groupsContainer">
                <!-- Group Card 1 -->
                <div class="card p-6 hover:shadow-elevation-2 transition-all duration-200 group-card" data-group-id="1">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-gradient-to-br from-primary to-primary-600 rounded-lg flex items-center justify-center mr-3">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-semibold text-text-primary">Weekend Trip</h3>
                                <p class="text-sm text-text-secondary">4 members</p>
                            </div>
                        </div>
                        <div class="relative">
                            <button class="p-1 text-text-secondary hover:text-text-primary transition-colors group-menu-btn" data-group-id="1">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="space-y-3 mb-4">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-text-secondary">Total Expenses</span>
                            <span class="font-semibold text-text-primary data-font">$485.50</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-text-secondary">Your Share</span>
                            <span class="font-semibold text-text-primary data-font">$121.38</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-text-secondary">You Owe</span>
                            <span class="font-semibold text-error-600 data-font">$45.50</span>
                        </div>
                    </div>

                    <div class="flex items-center space-x-2 mb-4">
                        <div class="flex -space-x-2">
                            <img class="w-8 h-8 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Member" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <img class="w-8 h-8 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1494790108755-2616b612b786?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Member" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <img class="w-8 h-8 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Member" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <div class="w-8 h-8 rounded-full border-2 border-white bg-gray-100 flex items-center justify-center">
                                <span class="text-xs font-medium text-text-secondary">+1</span>
                            </div>
                        </div>
                        <span class="text-xs text-text-secondary">John, Sarah, Mike, Alex</span>
                    </div>

                    <div class="flex space-x-2">
                        <button class="flex-1 bg-primary text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-700 transition-colors view-group-btn" data-group-id="1">
                            View Details
                        </button>
                        <button class="px-4 py-2 border border-border text-text-secondary hover:text-text-primary hover:border-text-primary rounded-md text-sm font-medium transition-colors add-expense-btn" data-group-id="1">
                            Add Expense
                        </button>
                    </div>
                </div>

                <!-- Group Card 2 -->
                <div class="card p-6 hover:shadow-elevation-2 transition-all duration-200 group-card" data-group-id="2">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-gradient-to-br from-secondary to-secondary-600 rounded-lg flex items-center justify-center mr-3">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-semibold text-text-primary">Office Lunch</h3>
                                <p class="text-sm text-text-secondary">6 members</p>
                            </div>
                        </div>
                        <div class="relative">
                            <button class="p-1 text-text-secondary hover:text-text-primary transition-colors group-menu-btn" data-group-id="2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="space-y-3 mb-4">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-text-secondary">Total Expenses</span>
                            <span class="font-semibold text-text-primary data-font">$156.75</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-text-secondary">Your Share</span>
                            <span class="font-semibold text-text-primary data-font">$26.13</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-text-secondary">You're Owed</span>
                            <span class="font-semibold text-success-600 data-font">$12.50</span>
                        </div>
                    </div>

                    <div class="flex items-center space-x-2 mb-4">
                        <div class="flex -space-x-2">
                            <img class="w-8 h-8 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Member" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <img class="w-8 h-8 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1494790108755-2616b612b786?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Member" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <img class="w-8 h-8 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Member" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <div class="w-8 h-8 rounded-full border-2 border-white bg-gray-100 flex items-center justify-center">
                                <span class="text-xs font-medium text-text-secondary">+3</span>
                            </div>
                        </div>
                        <span class="text-xs text-text-secondary">Team Members</span>
                    </div>

                    <div class="flex space-x-2">
                        <button class="flex-1 bg-primary text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-700 transition-colors view-group-btn" data-group-id="2">
                            View Details
                        </button>
                        <button class="px-4 py-2 border border-border text-text-secondary hover:text-text-primary hover:border-text-primary rounded-md text-sm font-medium transition-colors add-expense-btn" data-group-id="2">
                            Add Expense
                        </button>
                    </div>
                </div>

                <!-- Group Card 3 -->
                <div class="card p-6 hover:shadow-elevation-2 transition-all duration-200 group-card" data-group-id="3">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-gradient-to-br from-accent to-accent-600 rounded-lg flex items-center justify-center mr-3">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4m-6 4l2 2 4-4"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-semibold text-text-primary">Roommate Expenses</h3>
                                <p class="text-sm text-text-secondary">3 members</p>
                            </div>
                        </div>
                        <div class="relative">
                            <button class="p-1 text-text-secondary hover:text-text-primary transition-colors group-menu-btn" data-group-id="3">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="space-y-3 mb-4">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-text-secondary">Total Expenses</span>
                            <span class="font-semibold text-text-primary data-font">$603.50</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-text-secondary">Your Share</span>
                            <span class="font-semibold text-text-primary data-font">$201.17</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-text-secondary">You Owe</span>
                            <span class="font-semibold text-error-600 data-font">$82.00</span>
                        </div>
                    </div>

                    <div class="flex items-center space-x-2 mb-4">
                        <div class="flex -space-x-2">
                            <img class="w-8 h-8 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Member" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <img class="w-8 h-8 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1494790108755-2616b612b786?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Member" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <img class="w-8 h-8 rounded-full border-2 border-white" src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Member" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                        </div>
                        <span class="text-xs text-text-secondary">John, Emma, David</span>
                    </div>

                    <div class="flex space-x-2">
                        <button class="flex-1 bg-primary text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-primary-700 transition-colors view-group-btn" data-group-id="3">
                            View Details
                        </button>
                        <button class="px-4 py-2 border border-border text-text-secondary hover:text-text-primary hover:border-text-primary rounded-md text-sm font-medium transition-colors add-expense-btn" data-group-id="3">
                            Add Expense
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Recent Activity -->
        <section>
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-semibold text-text-primary">Recent Activity</h2>
                <button class="text-primary hover:text-primary-700 text-sm font-medium transition-colors">
                    View All Activity
                </button>
            </div>

            <div class="card">
                <div class="divide-y divide-border">
                    <!-- Activity Item 1 -->
                    <div class="p-6 flex items-center space-x-4">
                        <div class="w-10 h-10 bg-primary-50 rounded-full flex items-center justify-center">
                            <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm font-medium text-text-primary">Sarah added an expense in Weekend Trip</p>
                            <p class="text-sm text-text-secondary">Dinner at Italian Restaurant - $85.50</p>
                            <p class="text-xs text-text-secondary mt-1">2 hours ago</p>
                        </div>
                        <div class="text-right">
                            <p class="text-sm font-medium text-text-primary data-font">$21.38</p>
                            <p class="text-xs text-text-secondary">Your share</p>
                        </div>
                    </div>

                    <!-- Activity Item 2 -->
                    <div class="p-6 flex items-center space-x-4">
                        <div class="w-10 h-10 bg-success-50 rounded-full flex items-center justify-center">
                            <svg class="w-5 h-5 text-success-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm font-medium text-text-primary">Mike settled up with you</p>
                            <p class="text-sm text-text-secondary">Payment for Office Lunch expenses</p>
                            <p class="text-xs text-text-secondary mt-1">5 hours ago</p>
                        </div>
                        <div class="text-right">
                            <p class="text-sm font-medium text-success-600 data-font">+$12.50</p>
                            <p class="text-xs text-text-secondary">Received</p>
                        </div>
                    </div>

                    <!-- Activity Item 3 -->
                    <div class="p-6 flex items-center space-x-4">
                        <div class="w-10 h-10 bg-accent-50 rounded-full flex items-center justify-center">
                            <svg class="w-5 h-5 text-accent-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm font-medium text-text-primary">Emma joined Roommate Expenses</p>
                            <p class="text-sm text-text-secondary">Added as a new member to the group</p>
                            <p class="text-xs text-text-secondary mt-1">1 day ago</p>
                        </div>
                        <div class="text-right">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-accent-100 text-accent-800">
                                New Member
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Create Group Modal -->
    <div id="createGroupModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg shadow-elevation-3 w-full max-w-md">
            <div class="flex items-center justify-between p-6 border-b border-border">
                <h3 class="text-lg font-semibold text-text-primary">Create New Group</h3>
                <button id="closeCreateGroupModal" class="text-text-secondary hover:text-text-primary transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <form id="createGroupForm" class="p-6 space-y-4">
                <div>
                    <label for="groupName" class="block text-sm font-medium text-text-primary mb-2">Group Name</label>
                    <input type="text" id="groupName" name="groupName" required class="w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="Enter group name" />
                </div>
                <div>
                    <label for="groupDescription" class="block text-sm font-medium text-text-primary mb-2">Description (Optional)</label>
                    <textarea id="groupDescription" name="groupDescription" rows="3" class="w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="Brief description of the group"></textarea>
                </div>
                <div>
                    <label for="groupMembers" class="block text-sm font-medium text-text-primary mb-2">Add Members</label>
                    <input type="email" id="groupMembers" name="groupMembers" class="w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="Enter email addresses (comma separated)" />
                    <p class="text-xs text-text-secondary mt-1">Separate multiple emails with commas</p>
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="submit" class="flex-1 bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-primary-700 transition-colors">
                        Create Group
                    </button>
                    <button type="button" id="cancelCreateGroup" class="px-4 py-2 border border-border text-text-secondary hover:text-text-primary hover:border-text-primary rounded-lg font-medium transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Expense Modal -->
    <div id="addExpenseModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg shadow-elevation-3 w-full max-w-lg">
            <div class="flex items-center justify-between p-6 border-b border-border">
                <h3 class="text-lg font-semibold text-text-primary">Add Expense</h3>
                <button id="closeAddExpenseModal" class="text-text-secondary hover:text-text-primary transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <form id="addExpenseForm" class="p-6 space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="expenseAmount" class="block text-sm font-medium text-text-primary mb-2">Amount</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2 text-text-secondary">$</span>
                            <input type="number" id="expenseAmount" name="expenseAmount" step="0.01" required class="w-full pl-8 pr-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="0.00" />
                        </div>
                    </div>
                    <div>
                        <label for="expenseCategory" class="block text-sm font-medium text-text-primary mb-2">Category</label>
                        <select id="expenseCategory" name="expenseCategory" required class="w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary">
                            <option value>Select category</option>
                            <option value="food">Food & Dining</option>
                            <option value="transport">Transportation</option>
                            <option value="accommodation">Accommodation</option>
                            <option value="entertainment">Entertainment</option>
                            <option value="utilities">Utilities</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label for="expenseDescription" class="block text-sm font-medium text-text-primary mb-2">Description</label>
                    <input type="text" id="expenseDescription" name="expenseDescription" required class="w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="What was this expense for?" />
                </div>
                <div>
                    <label for="expenseDate" class="block text-sm font-medium text-text-primary mb-2">Date</label>
                    <input type="date" id="expenseDate" name="expenseDate" required class="w-full px-3 py-2 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" />
                </div>
                <div>
                    <label class="block text-sm font-medium text-text-primary mb-2">Split Method</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="radio" name="splitMethod" value="equal" checked class="text-primary focus:ring-primary" />
                            <span class="ml-2 text-sm text-text-primary">Split equally among all members</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="splitMethod" value="custom" class="text-primary focus:ring-primary" />
                            <span class="ml-2 text-sm text-text-primary">Custom split amounts</span>
                        </label>
                    </div>
                </div>
                <div id="customSplitSection" class="hidden">
                    <label class="block text-sm font-medium text-text-primary mb-2">Custom Split</label>
                    <div class="space-y-2" id="customSplitInputs">
                        <!-- Custom split inputs will be generated here -->
                    </div>
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="submit" class="flex-1 bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-primary-700 transition-colors">
                        Add Expense
                    </button>
                    <button type="button" id="cancelAddExpense" class="px-4 py-2 border border-border text-text-secondary hover:text-text-primary hover:border-text-primary rounded-lg font-medium transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Group Details Modal -->
    <div id="groupDetailsModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg shadow-elevation-3 w-full max-w-4xl max-h-[90vh] overflow-hidden">
            <div class="flex items-center justify-between p-6 border-b border-border">
                <div>
                    <h3 class="text-lg font-semibold text-text-primary" id="groupDetailsTitle">Group Details</h3>
                    <p class="text-sm text-text-secondary" id="groupDetailsSubtitle">Manage expenses and balances</p>
                </div>
                <button id="closeGroupDetailsModal" class="text-text-secondary hover:text-text-primary transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="overflow-y-auto max-h-[calc(90vh-120px)]">
                <div class="p-6">
                    <!-- Group Summary -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="card p-4">
                            <div class="text-center">
                                <p class="text-sm text-text-secondary">Total Expenses</p>
                                <p class="text-2xl font-semibold text-text-primary data-font" id="groupTotalExpenses">$485.50</p>
                            </div>
                        </div>
                        <div class="card p-4">
                            <div class="text-center">
                                <p class="text-sm text-text-secondary">Your Share</p>
                                <p class="text-2xl font-semibold text-text-primary data-font" id="groupYourShare">$121.38</p>
                            </div>
                        </div>
                        <div class="card p-4">
                            <div class="text-center">
                                <p class="text-sm text-text-secondary">Balance</p>
                                <p class="text-2xl font-semibold data-font" id="groupBalance">-$45.50</p>
                            </div>
                        </div>
                    </div>

                    <!-- Tabs -->
                    <div class="border-b border-border mb-6">
                        <nav class="-mb-px flex space-x-8">
                            <button class="group-tab active py-2 px-1 border-b-2 border-primary text-primary font-medium text-sm" data-tab="expenses">
                                Expenses
                            </button>
                            <button class="group-tab py-2 px-1 border-b-2 border-transparent text-text-secondary hover:text-text-primary hover:border-gray-300 font-medium text-sm" data-tab="balances">
                                Balances
                            </button>
                            <button class="group-tab py-2 px-1 border-b-2 border-transparent text-text-secondary hover:text-text-primary hover:border-gray-300 font-medium text-sm" data-tab="members">
                                Members
                            </button>
                        </nav>
                    </div>

                    <!-- Tab Content -->
                    <div id="expensesTab" class="tab-content">
                        <div class="space-y-4">
                            <!-- Expense Item -->
                            <div class="card p-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-10 h-10 bg-primary-50 rounded-lg flex items-center justify-center">
                                            <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <p class="font-medium text-text-primary">Dinner at Italian Restaurant</p>
                                            <p class="text-sm text-text-secondary">Added by Sarah â€¢ Food & Dining</p>
                                            <p class="text-xs text-text-secondary">September 14, 2025</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-semibold text-text-primary data-font">$85.50</p>
                                        <p class="text-sm text-text-secondary">Your share: $21.38</p>
                                    </div>
                                </div>
                            </div>

                            <!-- More expense items would go here -->
                        </div>
                    </div>

                    <div id="balancesTab" class="tab-content hidden">
                        <div class="space-y-4">
                            <!-- Balance Item -->
                            <div class="card p-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <img class="w-10 h-10 rounded-full" src="https://images.unsplash.com/photo-1494790108755-2616b612b786?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Sarah" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                        <div>
                                            <p class="font-medium text-text-primary">Sarah Johnson</p>
                                            <p class="text-sm text-text-secondary">sarah@example.com</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-semibold text-error-600 data-font">You owe $45.50</p>
                                        <button class="text-sm text-primary hover:text-primary-700 font-medium">Settle Up</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="membersTab" class="tab-content hidden">
                        <div class="space-y-4">
                            <!-- Member Item -->
                            <div class="card p-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <img class="w-10 h-10 rounded-full" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="John" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                        <div>
                                            <p class="font-medium text-text-primary">John Doe (You)</p>
                                            <p class="text-sm text-text-secondary">john@example.com</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800">
                                            Admin
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="hidden fixed top-4 right-4 z-50 max-w-sm w-full">
        <div id="notificationContent" class="rounded-lg shadow-elevation-3 p-4">
            <div class="flex items-center">
                <div id="notificationIcon" class="flex-shrink-0"></div>
                <div class="ml-3">
                    <p id="notificationMessage" class="text-sm font-medium"></p>
                </div>
                <div class="ml-auto pl-3">
                    <button id="closeNotification" class="inline-flex text-gray-400 hover:text-gray-600 focus:outline-none">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock data for groups
        const mockGroups = {
            1: {
                id: 1,
                name: 'Weekend Trip',
                description: 'Trip to the mountains',
                members: [
                    { id: 1, name: 'John Doe', email: 'john@example.com', avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', isAdmin: true },
                    { id: 2, name: 'Sarah Johnson', email: 'sarah@example.com', avatar: 'https://images.unsplash.com/photo-1494790108755-2616b612b786?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },
                    { id: 3, name: 'Mike Wilson', email: 'mike@example.com', avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },
                    { id: 4, name: 'Alex Brown', email: 'alex@example.com', avatar: 'https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' }
                ],
                expenses: [
                    { id: 1, description: 'Dinner at Italian Restaurant', amount: 85.50, category: 'food', date: '2025-09-14', paidBy: 2, splitAmong: [1, 2, 3, 4] },
                    { id: 2, description: 'Gas for the trip', amount: 120.00, category: 'transport', date: '2025-09-13', paidBy: 1, splitAmong: [1, 2, 3, 4] },
                    { id: 3, description: 'Hotel accommodation', amount: 280.00, category: 'accommodation', date: '2025-09-12', paidBy: 3, splitAmong: [1, 2, 3, 4] }
                ],
                totalExpenses: 485.50,
                yourShare: 121.38,
                balance: -45.50
            },
            2: {
                id: 2,
                name: 'Office Lunch',
                description: 'Weekly team lunch',
                members: [
                    { id: 1, name: 'John Doe', email: 'john@example.com', avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', isAdmin: true }
                ],
                expenses: [],
                totalExpenses: 156.75,
                yourShare: 26.13,
                balance: 12.50
            },
            3: {
                id: 3,
                name: 'Roommate Expenses',
                description: 'Shared apartment expenses',
                members: [
                    { id: 1, name: 'John Doe', email: 'john@example.com', avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', isAdmin: true }
                ],
                expenses: [],
                totalExpenses: 603.50,
                yourShare: 201.17,
                balance: -82.00
            }
        };

        // DOM elements
        const createGroupBtn = document.getElementById('createGroupBtn');
        const createGroupModal = document.getElementById('createGroupModal');
        const closeCreateGroupModal = document.getElementById('closeCreateGroupModal');
        const cancelCreateGroup = document.getElementById('cancelCreateGroup');
        const createGroupForm = document.getElementById('createGroupForm');

        const addExpenseModal = document.getElementById('addExpenseModal');
        const closeAddExpenseModal = document.getElementById('closeAddExpenseModal');
        const cancelAddExpense = document.getElementById('cancelAddExpense');
        const addExpenseForm = document.getElementById('addExpenseForm');

        const groupDetailsModal = document.getElementById('groupDetailsModal');
        const closeGroupDetailsModal = document.getElementById('closeGroupDetailsModal');

        const userMenuButton = document.getElementById('userMenuButton');
        const userMenu = document.getElementById('userMenu');
        const mobileMenuButton = document.getElementById('mobileMenuButton');
        const mobileMenu = document.getElementById('mobileMenu');

        let currentGroupId = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            setCurrentDate();
        });

        function initializeEventListeners() {
            // Create Group Modal
            createGroupBtn.addEventListener('click', () => openModal(createGroupModal));
            closeCreateGroupModal.addEventListener('click', () => closeModal(createGroupModal));
            cancelCreateGroup.addEventListener('click', () => closeModal(createGroupModal));
            createGroupForm.addEventListener('submit', handleCreateGroup);

            // Add Expense Modal
            closeAddExpenseModal.addEventListener('click', () => closeModal(addExpenseModal));
            cancelAddExpense.addEventListener('click', () => closeModal(addExpenseModal));
            addExpenseForm.addEventListener('submit', handleAddExpense);

            // Group Details Modal
            closeGroupDetailsModal.addEventListener('click', () => closeModal(groupDetailsModal));

            // User Menu
            userMenuButton.addEventListener('click', toggleUserMenu);
            document.addEventListener('click', (e) => {
                if (!userMenuButton.contains(e.target)) {
                    userMenu.classList.add('hidden');
                }
            });

            // Mobile Menu
            mobileMenuButton.addEventListener('click', toggleMobileMenu);

            // Group Cards
            document.addEventListener('click', handleGroupCardActions);

            // Split method radio buttons
            document.querySelectorAll('input[name="splitMethod"]').forEach(radio => {
                radio.addEventListener('change', handleSplitMethodChange);
            });

            // Group Details Tabs
            document.addEventListener('click', handleTabClick);

            // Search and Filter
            document.getElementById('groupSearch').addEventListener('input', filterGroups);
            document.getElementById('groupFilter').addEventListener('change', filterGroups);

            // Close notification
            document.getElementById('closeNotification').addEventListener('click', closeNotification);
        }

        function openModal(modal) {
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modal) {
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function toggleUserMenu() {
            userMenu.classList.toggle('hidden');
        }

        function toggleMobileMenu() {
            mobileMenu.classList.toggle('hidden');
        }

        function handleGroupCardActions(e) {
            const target = e.target.closest('button');
            if (!target) return;

            const groupId = target.dataset.groupId;
            if (!groupId) return;

            if (target.classList.contains('view-group-btn')) {
                openGroupDetails(groupId);
            } else if (target.classList.contains('add-expense-btn')) {
                openAddExpense(groupId);
            }
        }

        function openGroupDetails(groupId) {
            currentGroupId = groupId;
            const group = mockGroups[groupId];
            
            document.getElementById('groupDetailsTitle').textContent = group.name;
            document.getElementById('groupDetailsSubtitle').textContent = `${group.members.length} members`;
            document.getElementById('groupTotalExpenses').textContent = `$${group.totalExpenses.toFixed(2)}`;
            document.getElementById('groupYourShare').textContent = `$${group.yourShare.toFixed(2)}`;
            
            const balanceElement = document.getElementById('groupBalance');
            balanceElement.textContent = `${group.balance >= 0 ? '+' : ''}$${group.balance.toFixed(2)}`;
            balanceElement.className = `text-2xl font-semibold data-font ${group.balance >= 0 ? 'text-success-600' : 'text-error-600'}`;
            
            openModal(groupDetailsModal);
        }

        function openAddExpense(groupId) {
            currentGroupId = groupId;
            const group = mockGroups[groupId];
            
            // Generate custom split inputs
            generateCustomSplitInputs(group.members);
            
            openModal(addExpenseModal);
        }

        function generateCustomSplitInputs(members) {
            const container = document.getElementById('customSplitInputs');
            container.innerHTML = '';
            
            members.forEach(member => {
                const div = document.createElement('div');
                div.className = 'flex items-center justify-between';
                div.innerHTML = `
                    <span class="text-sm text-text-primary">${member.name}</span>
                    <div class="flex items-center space-x-2">
                        <span class="text-sm text-text-secondary">$</span>
                        <input type="number" step="0.01" min="0" class="w-20 px-2 py-1 border border-border rounded text-sm" data-member-id="${member.id}">
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function handleSplitMethodChange(e) {
            const customSplitSection = document.getElementById('customSplitSection');
            if (e.target.value === 'custom') {
                customSplitSection.classList.remove('hidden');
            } else {
                customSplitSection.classList.add('hidden');
            }
        }

        function handleTabClick(e) {
            if (!e.target.classList.contains('group-tab')) return;
            
            const tabName = e.target.dataset.tab;
            
            // Update active tab
            document.querySelectorAll('.group-tab').forEach(tab => {
                tab.classList.remove('active', 'border-primary', 'text-primary');
                tab.classList.add('border-transparent', 'text-text-secondary');
            });
            
            e.target.classList.add('active', 'border-primary', 'text-primary');
            e.target.classList.remove('border-transparent', 'text-text-secondary');
            
            // Show corresponding content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById(`${tabName}Tab`).classList.remove('hidden');
        }

        function handleCreateGroup(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const groupData = {
                name: formData.get('groupName'),
                description: formData.get('groupDescription'),
                members: formData.get('groupMembers')
            };
            
            // Simulate API call
            setTimeout(() => {
                showNotification('Group created successfully!', 'success');
                closeModal(createGroupModal);
                e.target.reset();
            }, 1000);
        }

        function handleAddExpense(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const expenseData = {
                amount: parseFloat(formData.get('expenseAmount')),
                category: formData.get('expenseCategory'),
                description: formData.get('expenseDescription'),
                date: formData.get('expenseDate'),
                splitMethod: formData.get('splitMethod')
            };
            
            // Validate custom split if selected
            if (expenseData.splitMethod === 'custom') {
                const customInputs = document.querySelectorAll('#customSplitInputs input');
                let totalCustomAmount = 0;
                
                customInputs.forEach(input => {
                    totalCustomAmount += parseFloat(input.value || 0);
                });
                
                if (Math.abs(totalCustomAmount - expenseData.amount) > 0.01) {
                    showNotification('Custom split amounts must equal the total expense amount', 'error');
                    return;
                }
            }
            
            // Simulate API call
            setTimeout(() => {
                showNotification('Expense added successfully!', 'success');
                closeModal(addExpenseModal);
                e.target.reset();
                document.getElementById('customSplitSection').classList.add('hidden');
            }, 1000);
        }

        function filterGroups() {
            const searchTerm = document.getElementById('groupSearch').value.toLowerCase();
            const filterValue = document.getElementById('groupFilter').value;
            const groupCards = document.querySelectorAll('.group-card');
            
            groupCards.forEach(card => {
                const groupName = card.querySelector('h3').textContent.toLowerCase();
                const matchesSearch = groupName.includes(searchTerm);
                const matchesFilter = filterValue === 'all'; // Simplified for demo
                
                if (matchesSearch && matchesFilter) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function setCurrentDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('expenseDate').value = today;
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            const content = document.getElementById('notificationContent');
            const icon = document.getElementById('notificationIcon');
            const messageEl = document.getElementById('notificationMessage');
            
            messageEl.textContent = message;
            
            if (type === 'success') {
                content.className = 'rounded-lg shadow-elevation-3 p-4 bg-success-50 border border-success-200';
                messageEl.className = 'text-sm font-medium text-success-800';
                icon.innerHTML = `
                    <svg class="w-5 h-5 text-success-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                `;
            } else {
                content.className = 'rounded-lg shadow-elevation-3 p-4 bg-error-50 border border-error-200';
                messageEl.className = 'text-sm font-medium text-error-800';
                icon.innerHTML = `
                    <svg class="w-5 h-5 text-error-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                    </svg>
                `;
            }
            
            notification.classList.remove('hidden');
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 5000);
        }

        function closeNotification() {
            document.getElementById('notification').classList.add('hidden');
        }

        // Close modals when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('fixed') && e.target.classList.contains('inset-0')) {
                const modals = [createGroupModal, addExpenseModal, groupDetailsModal];
                modals.forEach(modal => {
                    if (!modal.classList.contains('hidden')) {
                        closeModal(modal);
                    }
                });
            }
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>